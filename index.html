<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <title>LP3 - RA082180023 - Guilherme Harich</title>
    
</head>

<body>
    <h1 style="padding-top: 30px; ">Lista de Filmes Japoneses</h1>
    <p>  <button class="btn btn-primary mt-4 mb-2" onClick="chamaApi()">Pegar Dados API</button></p>
    <p>
        <table class="table">
            <thead>
                <tr>
                    <td><b>Título</b></td>
                    <td><b>Título Original</b></td>
                    <td><b>Título Original Romanização</b></td>
                    <td><b>Diretor</b></td>
                    <td><b>Produtor</b></td>
                    <td><b>Data de Lançamento</b></td>
                    <td><b>Duração</b></td>
                </tr>
            </thead>
            <tbody id="dadosTabela">

            </tbody>
        </table>
    </p>
<!--
<div class="col-md-6 col-sm-12">
    <canvas id="myChart" width="300px" height="250px"></canvas>
</div>
<script>
var ctx = document.getElementById('myChart');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});-->
</script>
 
    
    <script>
        function chamaApi() {
           let URL = "https://ghibliapi.herokuapp.com/films"
           let data;
           let tabela = document.getElementById("dadosTabela");
           tabela.innerHTML = "";
            fetch(URL, { method: "GET", mode: "cors"}).then(req => req.json()).then(show => {data = show; console.log(data);data.forEach(element => {let linha = criaLinha(element); tabela.appendChild(linha)})})
         
       

        }
       
        function criaLinha(dados) {
            let linha = document.createElement("tr");
                let tdTagTitulo = document.createElement("td");
                let tdTagTituloOriginal = document.createElement("td");
                let tdTagTituloOriginalRomanizado = document.createElement("td");
                let tdTagDiretor = document.createElement("td");
                let tdTagProdutor = document.createElement("td");
                let tdTagDataLancamento = document.createElement("td");
                let tdTagDataDuracao = document.createElement("td");
        
                tdTagTitulo.innerHTML = dados.title;
                tdTagTituloOriginal.innerHTML = dados.original_title;
                tdTagTituloOriginalRomanizado.innerHTML = dados.original_title_romanised;
                tdTagDiretor.innerHTML = dados.director;
                tdTagProdutor.innerHTML = dados.producer;
                tdTagDataLancamento.innerHTML = dados.release_date;
                tdTagDataDuracao.innerHTML = dados.running_time;
                linha.appendChild(tdTagTitulo);
                linha.appendChild(tdTagTituloOriginal);
                linha.appendChild(tdTagTituloOriginalRomanizado);
                linha.appendChild(tdTagDiretor);
                linha.appendChild(tdTagProdutor);
                linha.appendChild(tdTagDataLancamento);
                linha.appendChild(tdTagDataDuracao);

                return linha;
        
            
        }
    
        </script>
  
</body>

</html>